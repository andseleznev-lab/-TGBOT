# Workflow - Процесс разработки Mini App

Этот документ описывает как мы работаем над новыми фичами и багфиксами.

## Основной процесс (для новых фич)

Идея → PRD → Архитектура → Задачи → Реализация → Ревью → QA → Документация

### Детальная схема:

1. IDEA (Идея)
   ↓
   Создаём PRD: docs/prd/T-XXX.prd.md
   ↓
2. PRD READY (Требования готовы)
   ↓
   Исследуем кодовую базу
   ↓
3. RESEARCH (Анализ кода)
   ↓
   Проектируем архитектуру
   ↓
4. PLAN APPROVED (План утверждён)
   ↓
   Создаём список задач
   ↓
5. TASKLIST READY (Задачи готовы)
   ↓
   Реализуем маленькими шагами
   ↓
6. IMPLEMENT (Код написан)
   ↓
   Code Review
   ↓
7. REVIEW OK (Ревью пройдено)
   ↓
   QA тестирование
   ↓
8. RELEASE READY (Готово к релизу)
   ↓
   Обновляем документацию
   ↓
9. DOCS UPDATED (Всё задокументировано)
   ↓
   DEPLOY to Production


### Этап: IDEA (Идея)

**Что делаем**: формулируем что хотим сделать и зачем

**Выход**: файл `docs/prd/T-XXX.prd.md`

**Шаблон PRD**: `docs/templates/prd.template.md`

**Критерии готовности**:
- [ ] Описана проблема / возможность
- [ ] Понятна цель фичи
- [ ] Описаны основные сценарии использования
- [ ] Есть критерии успеха (метрики)
- [ ] Нет блокирующих вопросов

**Gate**: `PRD_READY`

---

### Этап: PLAN (Архитектура)

**Что делаем**: проектируем техническое решение

**Вход**: PRD 

**Выход**: файл `docs/plan/T-XXX.md`

**Что включаем**:
- Компоненты системы (какие файлы/функции/классы)
- Интерфейсы и контракты (API Make.com, функции JS)
- Потоки данных (как данные движутся через систему)
- NFR (производительность, безопасность, UX)
- Риски и митигация

**Критерии готовности**:
- [ ] Описана архитектура решения
- [ ] Понятны все компоненты и их взаимодействие
- [ ] Учтены NFR (производительность, безопасность)
- [ ] Описаны риски и способы их снижения

**Gate**: `PLAN_APPROVED`

---

### Этап: TASKS (Декомпозиция)

**Что делаем**: разбиваем план на маленькие задачи

**Вход**: Plan

**Выход**: файл `docs/tasklist/T-XXX.md`

**Формат задачи**:

- [ ] 1. Краткое описание задачи
  - Acceptance: как понять что готово
  - Files: какие файлы затронем

**Критерии хорошей задачи**:

- Имеет понятный acceptance критерий
- Можно закоммитить отдельно
- Не ломает существующий код

**Критерии готовности**:

- [ ] Все задачи достаточно мелкие 
- [ ] У каждой есть acceptance критерии
- [ ] Задачи в логическом порядке
- [ ] Покрыты все аспекты из плана

**Gate**: `TASKLIST_READY`

---

### Этап: IMPLEMENT (Реализация)

**Что делаем**: пишем код по задачам из tasklist

**Вход**: Tasklist

**Процесс**:
1. Берём первую задачу с `- [ ]`
2. Формулируем план изменений
3. **Ждём подтверждения "ОК"**
4. Вносим изменения (код + тесты)
5. Показываем diff
6. Обновляем tasklist: `- [x]`
7. **Останавливаемся**, ждём команды на следующую задачу

**Критерии готовности задачи**:
- [ ] Код написан согласно conventions.md
- [ ] Добавлены/обновлены тесты
- [ ] Локальные проверки прошли
- [ ] Tasklist обновлён
- [ ] Коммит сделан



**Типы замечаний**:

- **Blocking** - нужно исправить обязательно
- **Important** - желательно исправить
- **Nice to have** - можно в будущем

**Критерии готовности**:

- [ ] CI зелёный (если есть)
- [ ] Acceptance критерии задач выполнены
- [ ] Нет blocking замечаний
- [ ] Код готов к мержу


## Итеративность

Мы **не делаем всё сразу**!

Работаем итерациями:
1. Маленькая задача
2. Код
3. Тест
4. Ревью
5. Коммит
6. Следующая задача

## Структура артефактов

Для каждого тикета `T-XXX` создаём:

docs/
  prd/T-XXX.prd.md          # Product Requirements
  plan/T-XXX.md             # Архитектура и план
  tasklist/T-XXX.md         # Список задач

**Активный тикет** указан в `docs/.active_ticket`

## Инструменты

### Локальная разработка
- VS Code
- Claude Code CLI
- Git

### Мобильное тестирование
- Telegram WebApp Preview
- Eruda DevTools (в приложении)
- Реальные устройства

### Backend
- Make.com веб-интерфейс
- Google Sheets
- Zoom API dashboard
- Google Calendar


## Советы

### Для новых фич
- Не пропускай планирование
- Делай задачи маленькими (15-30 мин)
- Тестируй каждую задачу отдельно
- Коммить часто

### Для багфиксов
- Сначала понять причину
- Минимальный фикс
- Добавь тест чтобы не повторилось

### Для рефакторинга
- Объясни зачем
- План до/после
- Гарантируй что ничего не сломается
- Отдельная ветка

---

Этот workflow - **living document**. Мы его улучшаем по мере работы над проектом.
