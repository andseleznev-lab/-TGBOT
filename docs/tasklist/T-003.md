# Tasklist: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –Æ–∫–∞—Å—Å–∞

**–¢–∏–∫–µ—Ç**: T-003
**PRD**: `docs/prd/T-003.prd.md`
**–ü–ª–∞–Ω**: `docs/plan/T-003.md`
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2026-02-07
**–°—Ç–∞—Ç—É—Å**: DRAFT

---

## –ü—Ä–æ–≥—Ä–µ—Å—Å

**–í—Å–µ–≥–æ –∑–∞–¥–∞—á**: 28
**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**: 17
**–ü—Ä–æ–≥—Ä–µ—Å—Å**: [17/28] (61%)
**–°—Ç–∞—Ç—É—Å**: IN_PROGRESS

---

## –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Frontend) ‚úÖ

- [x] 1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É slots.json (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
  - **Acceptance**:
    - –í PRD –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è: `status` (free/locking/book), `user_id`, `locked_until`
    - –ü—Ä–∏–º–µ—Ä—ã JSON –æ–±–Ω–æ–≤–ª–µ–Ω—ã
  - **Files**: `docs/prd/T-003.prd.md`
  - **Estimate**: 5 –º–∏–Ω

- [x] 2. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ config.js
  - **Acceptance**:
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ `YOOKASSA_PAYMENT_ENDPOINT` (Make.com URL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞)
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ `PAYMENT_RETURN_URL` (URL –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã)
    - –î–æ–±–∞–≤–ª–µ–Ω –æ–±—ä–µ–∫—Ç `SERVICE_PRICES` —Å —Ü–µ–Ω–∞–º–∏ —É—Å–ª—É–≥:
      ```javascript
      SERVICE_PRICES: {
        diagnosis: 0,
        package: 75000,
        family: 10000,
        single: 8000
      }
      ```
  - **Files**: `config.js`
  - **Estimate**: 10 –º–∏–Ω

- [x] 3. –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ locking –≤ style.css
  - **Acceptance**:
    - –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å `.slot--locking` (–±–ª–µ–¥–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)
    - –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å `.slot--own` (–¥–ª—è —Å–≤–æ–∏—Ö —Å–ª–æ—Ç–æ–≤)
    - –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å `.payment-timer` (—Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞)
    - –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å `.payment-btn` (–∫–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å")
    - –°—Ç–∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç beige-–ø–∞–ª–∏—Ç—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞
  - **Files**: `style.css`
  - **Estimate**: 15 –º–∏–Ω

- [x] 4. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é calculateTimeRemaining(lockedUntil)
  - **Acceptance**:
    - –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç ISO 8601 timestamp
    - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ hours, minutes, isExpired }`
    - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã
    - –ï—Å—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  - **Files**: `app.js`
  - **Estimate**: 10 –º–∏–Ω

- [x] 5. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é renderLockingSlot(slot)
  - **Acceptance**:
    - –†–µ–Ω–¥–µ—Ä–∏—Ç —Å–ª–æ—Ç —Å –∫–ª–∞—Å—Å–æ–º `.slot--locking`
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞ (–≤—ã–∑—ã–≤–∞–µ—Ç `calculateTimeRemaining`)
    - –ï—Å–ª–∏ —Å–ª–æ—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É "–û–ø–ª–∞—Ç–∏—Ç—å"
    - –ï—Å–ª–∏ —Å–ª–æ—Ç —á—É–∂–æ–π ‚Äî –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∫–ª–∏–∫–∞ (`pointer-events: none`)
    - –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É (setInterval)
    - –ï—Å—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  - **Files**: `app.js`
  - **Estimate**: 30 –º–∏–Ω
  - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ `renderLockingBookingCard()` –≤ renderMyBookingsScreen

- [x] 6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å renderLockingSlot –≤ –∫–æ–Ω—Å–æ–ª–∏
  - **Acceptance**:
    - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–ª–æ—Ç —Å `status: "locking"`, `locked_until` —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞
    - –í—ã–∑–≤–∞—Ç—å `renderLockingSlot(slot)` ‚Üí —ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
    - –¢–∞–π–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "2 —á 0 –º–∏–Ω"
    - –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
  - **Files**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - **Estimate**: 10 –º–∏–Ω

- [x] 7. –ö–æ–º–º–∏—Ç —ç—Ç–∞–ø–∞ 1
  - **Acceptance**:
    - –ö–æ–º–º–∏—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º: `[T-003] –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ UI –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ locking`
    - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
  - **Files**: git
  - **Estimate**: 5 –º–∏–Ω
  - **Commit**: d65260e

---

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (Frontend) ‚úÖ

- [x] 8. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é createPayment(slotId, serviceId)
  - **Acceptance**:
    - –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç `user_id` –∏–∑ Telegram WebApp API
    - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (slotId, serviceId –Ω–µ –ø—É—Å—Ç—ã–µ)
    - –î–µ–ª–∞–µ—Ç POST –∑–∞–ø—Ä–æ—Å –∫ `CONFIG.YOOKASSA_PAYMENT_ENDPOINT`:
      ```json
      {
        "action": "create_payment",
        "slot_id": slotId,
        "user_id": userId,
        "service": serviceId
      }
      ```
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç loader "–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞..."
    - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ success, payment_url?, error? }`
    - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏: NetworkError, slot_locked, slot_not_found, yookassa_error
    - –ï—Å—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  - **Files**: `app.js`
  - **Estimate**: 40 –º–∏–Ω

- [x] 9. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é openPaymentWindow(paymentUrl)
  - **Acceptance**:
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ Telegram WebApp API
    - –í—ã–∑—ã–≤–∞–µ—Ç `window.Telegram.WebApp.openLink(paymentUrl, { try_instant_view: true })`
    - –í—ã–∑—ã–≤–∞–µ—Ç HapticFeedback: `impactOccurred('medium')`
    - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `State.isPaymentInProgress = true`
    - –ï—Å—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  - **Files**: `app.js`
  - **Estimate**: 15 –º–∏–Ω

- [x] 10. –û–±–Ω–æ–≤–∏—Ç—å handleBooking() –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø–ª–∞—Ç–æ–π
  - **Acceptance**:
    - –í–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç `createPayment(slotId, serviceId)`
    - –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ—Ç–≤–µ—Ç–µ –≤—ã–∑—ã–≤–∞–µ—Ç `openPaymentWindow(payment_url)`
    - –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç popup —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
    - –ö–Ω–æ–ø–∫–∞ MainButton –º–µ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ "–û–ø–ª–∞—Ç–∏—Ç—å X —Ä—É–±" (–≤–º–µ—Å—Ç–æ "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å")
  - **Files**: `app.js`
  - **Estimate**: 25 –º–∏–Ω
  - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ confirmBooking() —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ª–æ–≥–∏–∫–∏ –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö/–±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —É—Å–ª—É–≥

- [~] 11. –û–±–Ω–æ–≤–∏—Ç—å renderAvailableSlots() –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è locking —Å–ª–æ—Ç–æ–≤
  - **Acceptance**:
    - –°–ª–æ—Ç—ã —Å `status: "locking"` —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —á–µ—Ä–µ–∑ `renderLockingSlot()`
    - –°–ª–æ—Ç—ã —Å `status: "free"` —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–æ
    - –°–ª–æ—Ç—ã —Å `status: "book"` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (—Å–µ—Ä—ã–π —Ü–≤–µ—Ç)
  - **Files**: `app.js`
  - **Estimate**: 20 –º–∏–Ω
  - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ù–ï –ü–†–ò–ú–ï–ù–ò–ú–û - –ø–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É –¥–∏–∑–∞–π–Ω—É locking —Å–ª–æ—Ç—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ slots.json –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ "–ú–æ–∏ –∑–∞–ø–∏—Å–∏"

- [~] 12. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ (–º–æ–∫–∏ Make.com)
  - **Acceptance**:
    - –ó–∞–º–æ–∫–∞—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç Make.com (success: true, payment_url: "https://test.url")
    - –í—ã–∑–≤–∞—Ç—å `handleBooking()` ‚Üí –ø–ª–∞—Ç—ë–∂ —Å–æ–∑–¥–∞—ë—Ç—Å—è, WebView –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HapticFeedback —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
    - –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
  - **Files**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - **Estimate**: 20 –º–∏–Ω
  - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –Ω–∞ Stage 5 (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

- [x] 13. –ö–æ–º–º–∏—Ç —ç—Ç–∞–ø–∞ 2
  - **Acceptance**:
    - –ö–æ–º–º–∏—Ç: `[T-003] –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ WebView`
  - **Files**: git
  - **Estimate**: 5 –º–∏–Ω
  - **Commit**: fd59171

---

### –≠—Ç–∞–ø 3: Make.com —Å—Ü–µ–Ω–∞—Ä–∏–∏ ‚úÖ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–∞–ø –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤ Make.com (—è –Ω–µ –∏–º–µ—é –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞). –ó–∞–¥–∞—á–∏ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.

- [x] 14. –°–æ–∑–¥–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π "Create Payment" –≤ Make.com
  - **Acceptance**:
    - Endpoint: `/webhook/create-payment`
    - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç: `{ action, slot_id, user_id, service }`
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç slot.status === "free" –≤ slots.json
    - –°–æ–∑–¥–∞—ë—Ç –ø–ª–∞—Ç—ë–∂ –≤ –Æ–∫–∞—Å—Å–µ (amount –∏–∑ CONFIG.SERVICE_PRICES)
    - –û–±–Ω–æ–≤–ª—è–µ—Ç slots.json:
      - status ‚Üí "locking"
      - user_id ‚Üí –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
      - locked_until ‚Üí now() + 24h
    - –ö–æ–º–º–∏—Ç–∏—Ç –≤ git
    - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `{ success: true, payment_url: "..." }`
  - **Files**: Make.com
  - **Estimate**: 1 —á–∞—Å (–≤—Ä—É—á–Ω—É—é)

- [x] 15. –°–æ–∑–¥–∞—Ç—å webhook "Yookassa Webhook" –≤ Make.com
  - **Acceptance**:
    - URL: `/webhook/yookassa`
    - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç webhook –æ—Ç –Æ–∫–∞—Å—Å—ã (event: payment.succeeded)
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å webhook (HMAC-SHA256)
    - –ò–∑–≤–ª–µ–∫–∞–µ—Ç slot_id, user_id –∏–∑ metadata
    - –û–±–Ω–æ–≤–ª—è–µ—Ç slots.json:
      - status ‚Üí "book"
      - —É–¥–∞–ª–∏—Ç—å locked_until
    - –°–æ–∑–¥–∞—ë—Ç Zoom meeting
    - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram
    - –ö–æ–º–º–∏—Ç–∏—Ç –≤ git
  - **Files**: Make.com
  - **Estimate**: 1.5 —á–∞—Å–∞ (–≤—Ä—É—á–Ω—É—é)

- [x] 16. –°–æ–∑–¥–∞—Ç—å cron "TTL Monitor" –≤ Make.com
  - **Acceptance**:
    - –ó–∞–ø—É—Å–∫: –∫–∞–∂–¥—ã–π —á–∞—Å (cron: `0 * * * *`)
    - –ß–∏—Ç–∞–µ—Ç slots.json –∏–∑ git
    - –ù–∞—Ö–æ–¥–∏—Ç —Å–ª–æ—Ç—ã: status === "locking" && locked_until < now()
    - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—Ç–∞:
      - status ‚Üí "free"
      - —É–¥–∞–ª–∏—Ç—å user_id, locked_until
    - –ö–æ–º–º–∏—Ç–∏—Ç –≤ git (–µ—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
  - **Files**: Make.com
  - **Estimate**: 45 –º–∏–Ω (–≤—Ä—É—á–Ω—É—é)

- [x] 17. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Æ–∫–∞—Å—Å—É
  - **Acceptance**:
    - –ü–æ–ª—É—á–∏—Ç—å Shop ID –∏ Secret Key
    - –î–æ–±–∞–≤–∏—Ç—å webhook URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –Æ–∫–∞—Å—Å—ã: `https://hook.integromat.com/xxx/yookassa`
    - –°–æ–±—ã—Ç–∏—è: `payment.succeeded`, `payment.canceled`
    - –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Make.com: `YOOKASSA_SHOP_ID`, `YOOKASSA_SECRET_KEY`
  - **Files**: Yookassa Dashboard, Make.com
  - **Estimate**: 30 –º–∏–Ω (–≤—Ä—É—á–Ω—É—é)

---

### –≠—Ç–∞–ø 4: "–ú–æ–∏ –∑–∞–ø–∏—Å–∏" (My Bookings) üîÑ

- [x] 18. –û–±–Ω–æ–≤–∏—Ç—å loadUserBookings() –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è locking —Å–ª–æ—Ç–æ–≤
  - **Acceptance**:
    - –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç slots.json
    - –§–∏–ª—å—Ç—Ä—É–µ—Ç —Å–ª–æ—Ç—ã –ø–æ user_id (—Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
    - –°–ª–æ—Ç—ã —Å `status: "locking"` –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ ("–û–∂–∏–¥–∞—é—Ç –æ–ø–ª–∞—Ç—ã")
    - –°–ª–æ—Ç—ã —Å `status: "book"` –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–æ
  - **Files**: `app.js`
  - **Estimate**: 20 –º–∏–Ω
  - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ renderMyBookingsScreen()

- [x] 19. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é renderMyBookingsLockingSection()
  - **Acceptance**:
    - –†–µ–Ω–¥–µ—Ä–∏—Ç —Å–µ–∫—Ü–∏—é "–û–∂–∏–¥–∞—é—Ç –æ–ø–ª–∞—Ç—ã" (–µ—Å–ª–∏ –µ—Å—Ç—å locking —Å–ª–æ—Ç—ã)
    - –î–ª—è –∫–∞–∂–¥–æ–≥–æ locking —Å–ª–æ—Ç–∞:
      - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
      - –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å" (–ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ payment_url)
      - –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    - –¢–∞–π–º–µ—Ä—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
  - **Files**: `app.js`
  - **Estimate**: 30 –º–∏–Ω
  - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ renderLockingBookingCard() + –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ renderMyBookingsScreen()

- [ ] 20. –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é checkPaymentStatus(slotId)
  - **Acceptance**:
    - –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ Make.com: `{ action: "check_payment_status", slot_id }`
    - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–ª–æ—Ç–∞ (free/locking/book)
    - –û–±–Ω–æ–≤–ª—è–µ—Ç UI –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è
    - –ï—Å—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  - **Files**: `app.js`
  - **Estimate**: 25 –º–∏–Ω

- [ ] 21. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã" –≤ UI
  - **Acceptance**:
    - –ö–Ω–æ–ø–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–µ–∫—Ü–∏–∏ "–û–∂–∏–¥–∞—é—Ç –æ–ø–ª–∞—Ç—ã"
    - –ü—Ä–∏ –∫–ª–∏–∫–µ –≤—ã–∑—ã–≤–∞–µ—Ç `checkPaymentStatus(slotId)`
    - –ï—Å–ª–∏ –æ–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ ‚Üí —Å–ª–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ "–ú–æ–∏ –∑–∞–ø–∏—Å–∏" (book)
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç loader –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏
  - **Files**: `app.js`
  - **Estimate**: 15 –º–∏–Ω

- [ ] 22. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ "–ú–æ–∏ –∑–∞–ø–∏—Å–∏"
  - **Acceptance**:
    - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π locking —Å–ª–æ—Ç –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ user_id
    - –û—Ç–∫—Ä—ã—Ç—å "–ú–æ–∏ –∑–∞–ø–∏—Å–∏" ‚Üí —Å–ª–æ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ "–û–∂–∏–¥–∞—é—Ç –æ–ø–ª–∞—Ç—ã"
    - –¢–∞–π–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
    - –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WebView
    - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å" —Ä–∞–±–æ—Ç–∞–µ—Ç
  - **Files**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - **Estimate**: 20 –º–∏–Ω

- [ ] 23. –ö–æ–º–º–∏—Ç —ç—Ç–∞–ø–∞ 4
  - **Acceptance**:
    - –ö–æ–º–º–∏—Ç: `[T-003] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ locking —Å–ª–æ—Ç–æ–≤ –≤ "–ú–æ–∏ –∑–∞–ø–∏—Å–∏"`
  - **Files**: git
  - **Estimate**: 5 –º–∏–Ω

---

### –≠—Ç–∞–ø 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] 24. End-to-End —Ç–µ—Å—Ç: –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –æ–ø–ª–∞—Ç–∞ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
  - **Acceptance**:
    - –í—ã–±—Ä–∞—Ç—å —É—Å–ª—É–≥—É ‚Üí –≤—ã–±—Ä–∞—Ç—å —Å–ª–æ—Ç ‚Üí –Ω–∞–∂–∞—Ç—å "–û–ø–ª–∞—Ç–∏—Ç—å"
    - –°–ª–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `locking`, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –±–ª–µ–¥–Ω–æ-–∫—Ä–∞—Å–Ω—ã–º
    - WebView –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –Æ–∫–∞—Å—Å–æ–π
    - –û–ø–ª–∞—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π
    - Webhook –æ—Ç –Æ–∫–∞—Å—Å—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Make.com
    - –°–ª–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `book`, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ "–ú–æ–∏ –∑–∞–ø–∏—Å–∏"
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å Zoom-—Å—Å—ã–ª–∫–æ–π
  - **Files**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - **Estimate**: 30 –º–∏–Ω

- [ ] 25. –¢–µ—Å—Ç TTL: –∏—Å—Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤
  - **Acceptance**:
    - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π locking —Å–ª–æ—Ç —Å `locked_until` –≤ –ø—Ä–æ—à–ª–æ–º
    - –ó–∞–ø—É—Å—Ç–∏—Ç—å cron "TTL Monitor" –≤—Ä—É—á–Ω—É—é (–∏–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–ø—É—Å–∫–∞)
    - –°–ª–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `free`
    - –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Üí —Å–ª–æ—Ç —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
  - **Files**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - **Estimate**: 20 –º–∏–Ω

- [ ] 26. –¢–µ—Å—Ç Race Condition: –¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
  - **Acceptance**:
    - –î–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–∞–∑–Ω—ã–µ user_id) –≤—ã–±–∏—Ä–∞—é—Ç –æ–¥–∏–Ω —Å–ª–æ—Ç
    - –ü–µ—Ä–≤—ã–π –Ω–∞–∂–∏–º–∞–µ—Ç "–û–ø–ª–∞—Ç–∏—Ç—å" ‚Üí —Å–ª–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `locking`
    - –í—Ç–æ—Ä–æ–π –Ω–∞–∂–∏–º–∞–µ—Ç "–û–ø–ª–∞—Ç–∏—Ç—å" ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É "slot_locked"
    - –ü–µ—Ä–≤—ã–π –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç ‚Üí —Å–ª–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `book`
    - –í—Ç–æ—Ä–æ–π –≤–∏–¥–∏—Ç, —á—Ç–æ —Å–ª–æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
  - **Files**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - **Estimate**: 25 –º–∏–Ω

- [ ] 27. –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
  - **Acceptance**:
    - –Æ–∫–∞—Å—Å–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    - Webhook –Ω–µ –ø—Ä–∏—à—ë–ª ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Ä—É—á–Ω—É—é
    - –ü–ª–∞—Ç—ë–∂ –æ—Ç–∫–ª–æ–Ω—ë–Ω ‚Üí —Å–ª–æ—Ç –æ—Å—Ç–∞—ë—Ç—Å—è –≤ `locking`, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
  - **Files**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - **Estimate**: 20 –º–∏–Ω

- [ ] 28. –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç –∏ –¥–µ–ø–ª–æ–π
  - **Acceptance**:
    - –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
    - –ö–æ–º–º–∏—Ç: `[T-003] –ó–∞–∫—Ä—ã—Ç–∏–µ —Ç–∏–∫–µ—Ç–∞ - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Æ–∫–∞—Å—Å—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∞`
    - –û–±–Ω–æ–≤–∏—Ç—å `docs/tasklist/T-003.md`: —Å—Ç–∞—Ç—É—Å ‚Üí COMPLETED
    - –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ package.json (–µ—Å–ª–∏ –µ—Å—Ç—å)
    - –î–µ–ø–ª–æ–π –Ω–∞ GitHub Pages
  - **Files**: git, GitHub Pages
  - **Estimate**: 15 –º–∏–Ω

---

## –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã (–±–ª–æ–∫–µ—Ä—ã)

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–∫—Ä—ã—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏–∑ PRD:

- [ ] **–í–æ–ø—Ä–æ—Å 1**: –¶–µ–Ω—ã —É—Å–ª—É–≥ (–¥–ª—è SERVICE_PRICES)
  - diagnosis: 0 —Ä—É–±
  - package: ?
  - family: ?
  - single: ?

- [ ] **–í–æ–ø—Ä–æ—Å 2**: –ù—É–∂–Ω–∞ –ª–∏ –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ" –¥–æ –æ–ø–ª–∞—Ç—ã?

- [ ] **–í–æ–ø—Ä–æ—Å 3**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —á—Ç–æ —Å–ª–æ—Ç –≤ —Å—Ç–∞—Ç—É—Å–µ `locking`?
  - –í–∞—Ä–∏–∞–Ω—Ç A: –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–æ–æ–±—â–µ (–∫–∞–∫ `book`)
  - –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å –Ω–∞–¥–ø–∏—Å—å—é "–û—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è"

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- T-002 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω (slots.json –≤ git —Ä–∞–±–æ—Ç–∞–µ—Ç)
- –î–æ—Å—Ç—É–ø –∫ Make.com –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ê–∫–∫–∞—É–Ω—Ç –Æ–∫–∞—Å—Å—ã —Å Shop ID –∏ Secret Key

**–†–∏—Å–∫–∏**:
- Webhook –æ—Ç –Æ–∫–∞—Å—Å—ã –º–æ–∂–µ—Ç –Ω–µ –¥–æ–π—Ç–∏ ‚Üí –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω fallback (–∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å")
- Race condition –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ ‚Üí Make.com –¥–µ–ª–∞–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏**:
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Æ–∫–∞—Å—Å–∞ API](https://yookassa.ru/developers/api)
- [Webhook —Å–æ–±—ã—Ç–∏—è –Æ–∫–∞—Å—Å—ã](https://yookassa.ru/developers/using-api/webhooks)
- [Telegram WebApp API](https://core.telegram.org/bots/webapps)
