# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫

**–¢–∏–∫–µ—Ç**: T-001
**PRD**: `docs/prd/T-001.prd.md`
**–ê–≤—Ç–æ—Ä**: Claude Code
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2026-01-31
**–°—Ç–∞—Ç—É—Å**: PLAN_APPROVED

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Make.com —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏, –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é retry.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –û–±–∑–æ—Ä

–°–æ–∑–¥–∞–¥–∏–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é –æ–±—ë—Ä—Ç–∫—É `fetchWithErrorHandling()` –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç:
1. –í—ã–ø–æ–ª–Ω—è—Ç—å fetch —Å timeout –∏ AbortController
2. –û–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç–∏–ø –æ—à–∏–±–∫–∏ (Network, Timeout, Server, Abort)
3. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
4. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
5. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å retry –ª–æ–≥–∏–∫—É

–í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã Make.com API –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —ç—Ç—É –æ–±—ë—Ä—Ç–∫—É.

### –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   User Action   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Existing Function (e.g. loadDates())   ‚îÇ
‚îÇ  - –í—ã–∑—ã–≤–∞–µ—Ç fetchWithErrorHandling()    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    fetchWithErrorHandling()             ‚îÇ
‚îÇ  1. –°–æ–∑–¥–∞—ë—Ç AbortController + timeout   ‚îÇ
‚îÇ  2. –í—ã–ø–æ–ª–Ω—è–µ—Ç fetch                     ‚îÇ
‚îÇ  3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç response/error         ‚îÇ
‚îÇ  4. –í—ã–∑—ã–≤–∞–µ—Ç handleError() –ø—Ä–∏ –æ—à–∏–±–∫–µ   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚ñº         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇSuccess ‚îÇ  ‚îÇ  handleError()   ‚îÇ
‚îÇ        ‚îÇ  ‚îÇ  1. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç   ‚îÇ
‚îÇ        ‚îÇ  ‚îÇ     —Ç–∏–ø –æ—à–∏–±–∫–∏   ‚îÇ
‚îÇ        ‚îÇ  ‚îÇ  2. –õ–æ–≥–∏—Ä—É–µ—Ç     ‚îÇ
‚îÇ        ‚îÇ  ‚îÇ  3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç   ‚îÇ
‚îÇ        ‚îÇ  ‚îÇ     popup        ‚îÇ
‚îÇ        ‚îÇ  ‚îÇ  4. Retry (opt)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

### –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã

**Frontend**:
- `js/app.js`
  - –ß—Ç–æ –∏–∑–º–µ–Ω–∏–º: –¥–æ–±–∞–≤–∏–º –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
  - –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
    - `fetchWithErrorHandling(url, options, config)` - –≥–ª–∞–≤–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞
    - `handleNetworkError(error, context, retryFn)` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
    - `getErrorType(error, response)` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏
    - `showErrorPopup(message, retryFn)` - –ø–æ–∫–∞–∑ popup —Å retry
    - `retryRequest(fn, delay)` - –ª–æ–≥–∏–∫–∞ retry
  - –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
    - `loadAvailableDates()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é –æ–±—ë—Ä—Ç–∫—É
    - `loadTimeSlots()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é –æ–±—ë—Ä—Ç–∫—É
    - `createBooking()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é –æ–±—ë—Ä—Ç–∫—É
    - `loadUserBookings()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é –æ–±—ë—Ä—Ç–∫—É
    - –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å fetch

**Backend (Make.com)**:
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
- `js/config.js`
  - –ß—Ç–æ –¥–æ–±–∞–≤–∏–º: CONFIG.API_TIMEOUT = 10000 (10 —Å–µ–∫—É–Ω–¥)

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
–ù–µ—Ç –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### –§—É–Ω–∫—Ü–∏—è 1: `fetchWithErrorHandling(url, options = {}, config = {})`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è fetch —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫, timeout –∏ retry

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `url` (string): URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
- `options` (object): –æ–ø—Ü–∏–∏ –¥–ª—è fetch (method, headers, body, etc.)
- `config` (object): –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
  - `timeout` (number): —Ç–∞–π–º–∞—É—Ç –≤ –º—Å (default: 10000)
  - `retryable` (boolean): –º–æ–∂–Ω–æ –ª–∏ –¥–µ–ª–∞—Ç—å auto-retry (default: true –¥–ª—è GET)
  - `context` (string): –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "get_available_dates")
  - `showError` (boolean): –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ popup –æ—à–∏–±–∫–∏ (default: true)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: Promise<Response> –∏–ª–∏ throws Error

**–õ–æ–≥–∏–∫–∞**:
1. –°–æ–∑–¥–∞—Ç—å AbortController
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å timeout —á–µ—Ä–µ–∑ setTimeout
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å fetch —Å signal
4. –ï—Å–ª–∏ timeout ‚Üí abort –∏ throw TimeoutError
5. –ï—Å–ª–∏ response.ok ‚Üí –≤–µ—Ä–Ω—É—Ç—å response
6. –ï—Å–ª–∏ !response.ok ‚Üí –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –æ—à–∏–±–∫–∏ ‚Üí handleNetworkError()
7. Catch –æ—à–∏–±–∫–∏ fetch ‚Üí –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø ‚Üí handleNetworkError()

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```javascript
try {
  const response = await fetchWithErrorHandling(
    CONFIG.WEBHOOK_URL,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ action: 'get_available_dates' })
    },
    {
      context: 'get_available_dates',
      retryable: true,
      timeout: 10000
    }
  );

  const data = await response.json();
  return data;
} catch (error) {
  // –û—à–∏–±–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤ fetchWithErrorHandling
  return null;
}
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
- TimeoutError ‚Üí "–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"
- TypeError (Load failed) ‚Üí "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
- AbortError ‚Üí –º–æ–ª—á–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
- HTTP 5xx ‚Üí "–°–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
- –û—Å—Ç–∞–ª—å–Ω–æ–µ ‚Üí "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞"

---

#### –§—É–Ω–∫—Ü–∏—è 2: `handleNetworkError(error, context, retryFn, config)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞, –ø–æ–∫–∞–∑ popup, retry

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `error` (Error): –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏
- `context` (string): –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ (–¥–ª—è –ª–æ–≥–æ–≤)
- `retryFn` (function): —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è retry
- `config` (object): –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è { retryable, showError }

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: Promise<void>

**–õ–æ–≥–∏–∫–∞**:
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ getErrorType()
2. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å: `console.error([context] ErrorType: message, details)`
3. HapticFeedback error
4. –ï—Å–ª–∏ AbortError ‚Üí return (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º popup)
5. –ï—Å–ª–∏ retryable && config.retryable ‚Üí –ø–æ–ø—ã—Ç–∫–∞ auto-retry (1 —Ä–∞–∑)
6. –ï—Å–ª–∏ showError ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å popup —á–µ—Ä–µ–∑ showErrorPopup()

---

#### –§—É–Ω–∫—Ü–∏—è 3: `getErrorType(error, response)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –æ—à–∏–±–∫–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `error` (Error): –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏
- `response` (Response|null): –æ–±—ä–µ–∫—Ç response (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: Object `{ type: string, message: string }`

**–õ–æ–≥–∏–∫–∞**:
```javascript
if (error.name === 'AbortError') {
  return { type: 'ABORT', message: 'Request cancelled' };
}

if (error.name === 'TimeoutError') {
  return { type: 'TIMEOUT', message: '–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ' };
}

if (error.message === 'Load failed' || error.message === 'Failed to fetch') {
  return { type: 'NETWORK', message: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ' };
}

if (response && response.status >= 500) {
  return { type: 'SERVER', message: '–°–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ' };
}

if (response && response.status >= 400) {
  return { type: 'CLIENT', message: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å' };
}

return { type: 'UNKNOWN', message: '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ' };
```

---

#### –§—É–Ω–∫—Ü–∏—è 4: `showErrorPopup(message, retryFn)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∫–∞–∑–∞—Ç—å popup —Å –æ—à–∏–±–∫–æ–π –∏ –∫–Ω–æ–ø–∫–æ–π "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `message` (string): —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `retryFn` (function|null): —Ñ—É–Ω–∫—Ü–∏—è retry (–µ—Å–ª–∏ null - —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ Close)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: Promise<void>

**–õ–æ–≥–∏–∫–∞**:
```javascript
const buttons = [];

if (retryFn) {
  buttons.push({ id: 'retry', type: 'default', text: '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å' });
}

buttons.push({ type: 'cancel' });

tg.showPopup({
  title: '–û—à–∏–±–∫–∞',
  message: message,
  buttons: buttons
}, (buttonId) => {
  if (buttonId === 'retry' && retryFn) {
    retryFn();
  }
});
```

---

#### –§—É–Ω–∫—Ü–∏—è 5: `retryRequest(requestFn, delay = 2000)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω–∏—Ç—å retry –∑–∞–ø—Ä–æ—Å–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `requestFn` (function): —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–∞
- `delay` (number): –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ retry –≤ –º—Å

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: Promise<any>

**–õ–æ–≥–∏–∫–∞**:
```javascript
async function retryRequest(requestFn, delay = 2000) {
  console.log(`üîÑ Retry after ${delay}ms...`);

  // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä retry
  showRetryIndicator('–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞...');

  await new Promise(resolve => setTimeout(resolve, delay));

  try {
    const result = await requestFn();
    hideRetryIndicator();
    return result;
  } catch (error) {
    hideRetryIndicator();
    throw error;
  }
}
```

---

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### `showRetryIndicator(message)` / `hideRetryIndicator()`

–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞..."

```javascript
function showRetryIndicator(message) {
  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ DOM API
  const overlay = document.createElement('div');
  overlay.id = 'retry-indicator';
  overlay.className = 'retry-overlay';

  const content = document.createElement('div');
  content.className = 'retry-content glass-card';

  const loader = document.createElement('div');
  loader.className = 'loader';

  const text = document.createElement('p');
  text.textContent = message; // –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ–º textContent

  content.appendChild(loader);
  content.appendChild(text);
  overlay.appendChild(content);
  document.body.appendChild(overlay);
}

function hideRetryIndicator() {
  const overlay = document.getElementById('retry-indicator');
  if (overlay) {
    overlay.remove();
  }
}
```

---

## üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ (Happy Path - —É—Å–ø–µ—Ö)

```
1. User –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ Booking screen
   ‚Üì
2. loadAvailableDates() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
   ‚Üì
3. fetchWithErrorHandling(url, options, { context: 'get_available_dates' })
   - –°–æ–∑–¥–∞—ë—Ç AbortController
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç timeout 10s
   ‚Üì
4. Fetch –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ –∑–∞ 1.5s
   ‚Üì
5. Response.ok = true
   ‚Üì
6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç response
   ‚Üì
7. loadAvailableDates() –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç data
   ‚Üì
8. –†–µ–Ω–¥–µ—Ä–∏—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å –¥–∞—Ç–∞–º–∏
```

### –ü–æ—Ç–æ–∫ —Å –æ—à–∏–±–∫–æ–π —Å–µ—Ç–∏ (Network Error)

```
1. User –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ Booking screen
   ‚Üì
2. loadAvailableDates() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
   ‚Üì
3. fetchWithErrorHandling(url, options, config)
   - –°–æ–∑–¥–∞—ë—Ç AbortController
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç timeout 10s
   ‚Üì
4. ‚ùå Fetch fails: TypeError: Load failed
   ‚Üì
5. catch –±–ª–æ–∫ ‚Üí handleNetworkError(error, 'get_available_dates', retryFn, config)
   ‚Üì
6. getErrorType(error) ‚Üí { type: 'NETWORK', message: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ' }
   ‚Üì
7. console.error('[get_available_dates] NETWORK error: Load failed')
   ‚Üì
8. tg.HapticFeedback.notificationOccurred('error')
   ‚Üì
9. –ï—Å–ª–∏ retryable ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry —á–µ—Ä–µ–∑ 2s (1 —Ä–∞–∑)
   ‚Üì
10. –ï—Å–ª–∏ retry fails ‚Üí showErrorPopup(message, manualRetryFn)
    - Popup: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
    - –ö–Ω–æ–ø–∫–∏: [–ü–æ–≤—Ç–æ—Ä–∏—Ç—å] [–û—Ç–º–µ–Ω–∞]
   ‚Üì
11. User –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"
   ‚Üì
12. manualRetryFn() ‚Üí loadAvailableDates() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–Ω–æ–≤–∞
```

### –ü–æ—Ç–æ–∫ —Å —Ç–∞–π–º–∞—É—Ç–æ–º

```
1. loadAvailableDates() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
   ‚Üì
2. fetchWithErrorHandling() —Å timeout 10s
   ‚Üì
3. Fetch –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ (>10s)
   ‚Üì
4. ‚ùå Timeout ‚Üí controller.abort()
   ‚Üì
5. Throw new TimeoutError('Request timeout')
   ‚Üì
6. handleNetworkError() ‚Üí type: 'TIMEOUT'
   ‚Üì
7. Popup: "–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ"
```

---

## üé® –ò–∑–º–µ–Ω–µ–Ω–∏—è UI

### –ù–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**Retry Indicator Overlay**:
–°–æ–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ DOM API (—Å–º. —Ñ—É–Ω–∫—Ü–∏—é showRetryIndicator –≤—ã—à–µ)

**CSS –∫–ª–∞—Å—Å—ã** (–¥–æ–±–∞–≤–∏—Ç—å –≤ styles.css):
```css
.retry-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.retry-content {
  padding: 30px;
  text-align: center;
  min-width: 200px;
}

.retry-content .loader {
  /* –°–ø–∏–Ω–Ω–µ—Ä –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */
  width: 40px;
  height: 40px;
  border: 3px solid var(--accent-primary);
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 15px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.retry-content p {
  margin: 0;
  color: var(--text-primary);
  font-size: 16px;
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö

**–í—Å–µ —ç–∫—Ä–∞–Ω—ã —Å API –∑–∞–ø—Ä–æ—Å–∞–º–∏**:
- –ù–∏–∫–∞–∫–∏—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢–æ–ª—å–∫–æ —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**API –≤—ã–∑–æ–≤—ã**:
- Timeout 10 —Å–µ–∫—É–Ω–¥ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "–∑–∞–≤–∏—Å–∞–Ω–∏–µ" UI
- AbortController –æ—Ç–º–µ–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ç–∞–±–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry —Ç–æ–ª—å–∫–æ 1 —Ä–∞–∑ (–Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ–º —Å–µ—Ä–≤–µ—Ä)

**–†–µ–Ω–¥–µ—Ä–∏–Ω–≥**:
- Retry indicator –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è/—É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ DOM (–Ω–µ –≤–∏—Å–∏—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ)
- Popup –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Ç–∏–≤–Ω—ã–π Telegram (–Ω–µ —Å–æ–∑–¥–∞—ë–º —Å–≤–æ–π)

**–ü–∞–º—è—Ç–∏**:
- AbortController –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- Timeout –æ—á–∏—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ clearTimeout

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏: < 1 —Å–µ–∫—É–Ω–¥–∞
- –í—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ popup: < 500 –º—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry: max 1 —Ä–∞–∑
- Timeout: 10 —Å–µ–∫—É–Ω–¥

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**Frontend**:
- –ù–µ –ª–æ–≥–∏—Ä—É–µ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (user_id, tokens)
- –õ–æ–≥–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ç–∏–ø –æ—à–∏–±–∫–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ–º textContent –≤–º–µ—Å—Ç–æ innerHTML –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**Backend (Make.com)**:
- –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- –ù–µ –ø–µ—Ä–µ–¥–∞—ë–º user_id –≤ –ª–æ–≥–∞—Ö –æ—à–∏–±–æ–∫
- –ù–µ –ª–æ–≥–∏—Ä—É–µ–º —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞ (–º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å personal data)
- –õ–æ–≥–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ: –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Ç–∏–ø –æ—à–∏–±–∫–∏, HTTP status

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [x] Network error –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] Timeout error –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] AbortError –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è popup)
- [x] HTTP 500 –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry —Ä–∞–±–æ—Ç–∞–µ—Ç (1 —Ä–∞–∑)
- [x] Manual retry —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Popup –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- [x] HapticFeedback —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [x] –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ (AbortController, timeout –æ—á–∏—â–∞—é—Ç—Å—è)
- [x] –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º (iOS/Android)
- [x] Popup –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Telegram WebApp

**–†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- [x] –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è

### –¢–µ—Å—Ç-–∫–µ–π—Å—ã

**TC-1: Network Error –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞—Ç**
- **–®–∞–≥–∏**:
  1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  2. –û—Ç–∫–ª—é—á–∏—Ç—å WiFi/–º–æ–±–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ç–∞–± Booking
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
  - Popup: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
  - –ö–Ω–æ–ø–∫–∏: [–ü–æ–≤—Ç–æ—Ä–∏—Ç—å] [–û—Ç–º–µ–Ω–∞]
  - HapticFeedback error

**TC-2: –£—Å–ø–µ—à–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry**
- **–®–∞–≥–∏**:
  1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  2. –ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–±–æ–π —Å–µ—Ç–∏ (intercept fetch)
  3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ç–∞–± Booking
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
  - –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å fails
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞..."
  - –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã retry —É—Å–ø–µ—à–µ–Ω
  - –î–∞—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã

**TC-3: Timeout error**
- **–®–∞–≥–∏**:
  1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  2. –ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (>10s)
  3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ç–∞–± Booking
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
  - –ß–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ –∑–∞–ø—Ä–æ—Å –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è
  - Popup: "–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ"

**TC-4: –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤**
- **–®–∞–≥–∏**:
  1. –ë—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ç–∞–±—ã 10 —Ä–∞–∑
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
  - –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–º–µ–Ω—è—é—Ç—Å—è (AbortError)
  - Popup –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è AbortError
  - –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏

**–†–∏—Å–∫ 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –¥—É–±–ª–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è**
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è
- **–í–ª–∏—è–Ω–∏–µ**: –í—ã—Å–æ–∫–æ–µ (–¥—É–±–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π)
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry —Ç–æ–ª—å–∫–æ –¥–ª—è GET –∑–∞–ø—Ä–æ—Å–æ–≤ (retryable: true —Ç–æ–ª—å–∫–æ –¥–ª—è read operations)
- **–ü–ª–∞–Ω –ë**: –î–æ–±–∞–≤–∏—Ç—å idempotency key –¥–ª—è create/update –æ–ø–µ—Ä–∞—Ü–∏–π

**–†–∏—Å–∫ 2: Timeout 10s —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ–π —Å–µ—Ç–∏**
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è
- **–í–ª–∏—è–Ω–∏–µ**: –°—Ä–µ–¥–Ω–µ–µ (–ª–æ–∂–Ω—ã–µ timeout –æ—à–∏–±–∫–∏)
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 3G —Å–µ—Ç–∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 15s
- **–ü–ª–∞–Ω –ë**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π timeout —á–µ—Ä–µ–∑ config

**–†–∏—Å–∫ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏**
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è
- **–í–ª–∏—è–Ω–∏–µ**: –ù–∏–∑–∫–æ–µ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç)
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: Fallback –Ω–∞ –æ–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞"
- **–ü–ª–∞–Ω –ë**: –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Make.com

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö**:
- –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ù–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã**:
- –ù–µ—Ç –Ω–æ–≤—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

---

## üìù –†–µ—à–µ–Ω–∏—è –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ 1: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ vs –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
- **–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã**:
  - –í–∞—Ä–∏–∞–Ω—Ç –ê: –û–±—ë—Ä—Ç–∫–∞ fetchWithErrorHandling() –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    - ‚úÖ –û–¥–∏–Ω –∫–æ–¥, –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
    - ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    - ‚ùå –ù—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã
  - –í–∞—Ä–∏–∞–Ω—Ç –ë: –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ –∫–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é
    - ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
    - ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
    - ‚ùå –°–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- **–í—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –í–∞—Ä–∏–∞–Ω—Ç –ê (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞)
- **–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–†–µ—à–µ–Ω–∏–µ 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry - —Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫?**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —É–¥–æ–±—Å—Ç–≤–æ–º –∏ —Ä–∏—Å–∫–æ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- **–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã**:
  - –í–∞—Ä–∏–∞–Ω—Ç –ê: 3 retry —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
    - ‚úÖ –í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞
    - ‚ùå –†–∏—Å–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
    - ‚ùå –î–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ
  - –í–∞—Ä–∏–∞–Ω—Ç –ë: 1 retry + manual retry —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É
    - ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
    - ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å
    - ‚ùå –ß—É—Ç—å –º–µ–Ω–µ–µ —É–¥–æ–±–Ω–æ
- **–í—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –í–∞—Ä–∏–∞–Ω—Ç –ë (1 auto + manual)
- **–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–∞–∂–Ω–µ–µ –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ß—Ç–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [x] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ - JSDoc –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [x] `CHANGELOG.md` - –æ–ø–∏—Å–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- [ ] `docs/make-routes.md` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] `README.md` - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–∞

–ü–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–æ–∑–¥–∞–Ω–∏—é tasklist —É–±–µ–¥–∏—Å—å:

- [x] –û–ø–∏—Å–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤—Å–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [x] –†–∞—Å–ø–∏—Å–∞–Ω—ã –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö (happy path –∏ –æ—à–∏–±–∫–∏)
- [x] –£—á—Ç–µ–Ω—ã NFR (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [x] –û–ø–∏—Å–∞–Ω—ã –≤—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [x] –í—ã—è–≤–ª–µ–Ω—ã —Ä–∏—Å–∫–∏ –∏ –æ–ø–∏—Å–∞–Ω–∞ –º–∏—Ç–∏–≥–∞—Ü–∏—è
- [x] –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω
- [x] –í—Å–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [x] –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ `PLAN_APPROVED`

**–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –∑–∞–¥–∞—á–∏!**
